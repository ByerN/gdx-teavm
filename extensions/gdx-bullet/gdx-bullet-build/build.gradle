plugins {
    id 'java'
}

group = project.groupId

project.ext.mainClassName = "com.github.xpenatan.gdx.html5.bullet.Main"

dependencies {
    implementation "com.github.xpenatan.jParser:jParser-core:$project.jParserVersion"
    implementation "com.github.xpenatan.jParser:jParser-teavm:$project.jParserVersion"
    implementation "com.github.xpenatan.jParser:jParser-cpp:$project.jParserVersion"
}

task generateNativeProject(dependsOn: classes, type: JavaExec) {
    setGroup("teavm")
    setDescription("Generate native project")
    mainClass.set(project.mainClassName)
    setClasspath(sourceSets.main.runtimeClasspath)
}


clean.doFirst {
    def buildPath = projectDir.toString() + "/jni/build/"
    if(new File(buildPath).exists()) {
        project.delete(files(buildPath))
    }
}